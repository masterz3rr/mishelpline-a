"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[380],{9380:function(e,n,t){t.r(n);var s=t(1413),r=t(2982),c=t(4165),i=t(5861),o=t(885),u=t(8870),a=t(890),l=t(9281),d=t(703),f=t(9836),h=t(6890),p=t(5855),Z=t(3994),x=t(3382),v=t(1918),j=t(3239),m=t(3935),b=t(2791),g=t(6819),y=t(5322),C=t(4163),k=t(4839),q=t(9112),w=t(184);n.default=function(){var e=(0,b.useContext)(C.U),n=(0,b.useContext)(y.V),t=(0,b.useState)([]),K=(0,o.Z)(t,2),S=K[0],R=K[1],A=(0,b.useState)(!1),_=(0,o.Z)(A,2),M=_[0],N=_[1],z=(0,b.useState)(!1),D=(0,o.Z)(z,2),L=D[0],O=D[1],E=(0,b.useState)(),F=(0,o.Z)(E,2),I=F[0],P=F[1],T=(0,b.useState)(),U=(0,o.Z)(T,2),V=U[0],B=U[1],G=(0,b.useState)(!1),H=(0,o.Z)(G,2),J=H[0],Q=H[1],W=function(){var n=(0,i.Z)((0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.authAxios.get("/requests/assigned").then((function(e){var n=e.data;R(n.requests)})).catch((function(e){console.log(e)}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),X=function(){var n=(0,i.Z)((0,c.Z)().mark((function n(t){var s,r,i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,Q(!0),n.next=4,e.authAxios.patch("/request/complete/".concat(t.id),t);case 4:s=n.sent,r=s.data,P(r.message),N(!0),B(""),Q(!1),n.next=19;break;case 12:n.prev=12,n.t0=n.catch(0),i=n.t0.response.data,B(i.message),O(!0),P(""),Q(!1);case 19:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}();return(0,b.useEffect)((function(){W();var t=n.pusher.subscribe("request");return t.bind("created",(function(n){R((function(e){return[].concat((0,r.Z)(e),[n])})),e.setRefreshKey(e.refreshKey=1)})),t.bind("updated",(function(n){R(S.map((function(e){return e._id===n._id?(0,s.Z)((0,s.Z)({},S),{},{updateReq:n}):e}))),e.setRefreshKey(e.refreshKey=1)})),t.bind("deleted-req",(function(n){R(S.filter((function(e,t){return e._id!==n[t]._id}))),e.setRefreshKey(e.refreshKey+1)})),function(){t.unbind_all(),t.unsubscribe("request")}}),[e.refreshKey]),(0,w.jsxs)(w.Fragment,{children:[I&&(0,w.jsx)(q.j,{open:M,setOpen:N,successMessage:I}),V&&(0,w.jsx)(q.A,{open:L,setOpen:O,errorMessage:V}),(0,w.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"column",gap:2},children:[(0,w.jsx)(a.Z,{variant:"h6",component:"h2",children:"Requests"}),(0,w.jsx)(l.Z,{component:d.Z,children:(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(h.Z,{children:(0,w.jsx)(p.Z,{children:g.AN.map((function(e,n){return(0,w.jsx)(Z.Z,{children:e.label},n)}))})}),(0,w.jsx)(x.Z,{children:S.map((function(e,n){var t=new Date(null===e||void 0===e?void 0:e.createdAt),s=t.getMonth()+1,r=t.getDate();return(0,w.jsxs)(p.Z,{children:[(0,w.jsx)(Z.Z,{children:"".concat(s," - ").concat(r)}),(0,w.jsx)(Z.Z,{children:null===e||void 0===e?void 0:e.ticketNo}),(0,w.jsx)(Z.Z,{children:"".concat(null===e||void 0===e?void 0:e.user.firstName," ").concat(null===e||void 0===e?void 0:e.user.lastName)}),(0,w.jsx)(Z.Z,{children:null===e||void 0===e?void 0:e.title}),(0,w.jsx)(Z.Z,{children:null===e||void 0===e?void 0:e.reqType}),(0,w.jsx)(Z.Z,{children:(0,w.jsxs)(u.Z,{sx:{display:"flex",gap:.5},children:[!0===(null===e||void 0===e?void 0:e.completed)&&!1===(null===e||void 0===e?void 0:e.pending)&&(0,w.jsx)(v.Z,{label:"Completed",color:"success"}),!0===(null===e||void 0===e?void 0:e.pending)&&(0,w.jsx)(v.Z,{label:"Pending",color:"secondary"})]})}),(0,w.jsx)(Z.Z,{children:null!==e&&void 0!==e&&e.pending?(0,w.jsx)(k.Z,{color:"success",disabled:!0===J,startIcon:!0===J?(0,w.jsx)(j.Z,{size:20,color:"primary"}):(0,w.jsx)(m.Z,{}),onClick:function(){X(e)},children:"Complete Request"}):""})]},n)}))})]})})]})]})}},3935:function(e,n,t){var s=t(4836);n.Z=void 0;var r=s(t(5649)),c=t(184),i=(0,r.default)((0,c.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");n.Z=i}}]);
//# sourceMappingURL=380.03efb8a9.chunk.js.map