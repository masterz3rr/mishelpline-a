{"version":3,"file":"static/js/101.2b54ed0d.chunk.js","mappings":"4VAuLA,UAlKc,WACb,IAAMA,GAAeC,EAAAA,EAAAA,YAAWC,EAAAA,GAChC,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA4CF,EAAAA,EAAAA,YAA5C,eAAOG,EAAP,KAAuBC,EAAvB,KACA,GAA8BJ,EAAAA,EAAAA,WAAS,GAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACMC,GAAcT,EAAAA,EAAAA,YAAWU,EAAAA,GAC/B,GAA8BR,EAAAA,EAAAA,UAAS,IAAvC,eAAOS,EAAP,KAAgBC,EAAhB,KAaMC,EAAa,yCAAG,WAAOC,GAAP,8FAEpBN,GAAW,GAFS,SAGGT,EAAagB,UAAUC,MAAvB,uBAA6CF,IAHhD,gBAGZG,EAHY,EAGZA,KACRX,EAAkBW,EAAKC,SACvBd,GAAW,GACXI,GAAW,GANS,kDAQpBW,QAAQC,IAAR,MARoB,0DAAH,sDAYbC,EAAU,yCAAG,WAAOP,GAAP,sFAEjBN,GAAW,GAFM,SAGXT,EAAagB,UAAUO,OAAvB,iBAAwCR,IAH7B,OAIjBR,EAAkB,gBAClBF,GAAW,GACXI,GAAW,GANM,gDAQjBW,QAAQC,IAAR,MARiB,yDAAH,sDA2ChB,OA/BAG,EAAAA,EAAAA,YAAU,WAlCTxB,EAAagB,UACXS,IADF,UAEEC,MAAK,YAAe,IAAZR,EAAW,EAAXA,KACRL,EAAWK,EACX,IACAS,OAAM,SAACC,GACPR,QAAQC,IAAIO,EACZ,IA6BF,IAAMC,EAAenB,EAAYoB,OAAOC,UAAU,SAuBlD,OArBAF,EAAaG,KAAK,WAAW,SAACC,GAC7BpB,GAAW,SAACD,GAAD,wBAAiBA,GAAjB,CAA0BqB,GAA1B,IACXjC,EAAakC,cAAelC,EAAamC,WAAa,EACtD,IAEDN,EAAaG,KAAK,WAAW,SAACI,GAC7BvB,EACCD,EAAQyB,KAAI,SAACC,GAAD,OACXA,EAAKC,MAAQH,EAAYG,KAAzB,kBAAoC3B,GAApC,IAA6CwB,YAAAA,IAAgBE,CADlD,KAIbtC,EAAakC,cAAelC,EAAamC,WAAa,EACtD,IAEDN,EAAaG,KAAK,gBAAgB,SAACQ,GAClC3B,EACCD,EAAQ6B,QAAO,SAACH,EAAMI,GAAP,OAAiBJ,EAAKC,MAAQC,EAAYE,GAAOH,GAAjD,KAEhBvC,EAAakC,cAAclC,EAAamC,WAAa,EACrD,IAEM,WACNN,EAAac,aACbd,EAAae,YAAY,QACzB,CACD,GAAE,CAAC5C,EAAamC,cAGhB,gCACE7B,IACA,SAAC,IAAD,CACCuC,KAAMzC,EACN0C,QAASzC,EACTC,eAAgBA,KAGlB,UAAC,IAAD,CACCyC,GAAI,CACHC,QAAS,OACTC,eAAgB,gBAChBC,cAAe,SACfC,IAAK,GALP,WAQC,SAAC,IAAD,CAAYC,QAAQ,KAAKC,UAAU,KAAnC,gCAIA,SAAC,IAAD,CAAgBA,UAAWC,EAAAA,EAA3B,UACC,UAAC,IAAD,YACC,SAAC,IAAD,WACC,SAAC,IAAD,UACEhB,EAAAA,GAAAA,KAAS,SAACiB,EAAKb,GAAN,OACT,SAAC,IAAD,UAAwBa,EAAIC,OAAZd,EADP,SAKZ,SAAC,IAAD,iBACE9B,QADF,IACEA,OADF,EACEA,EAASyB,KAAI,SAACoB,EAAQf,GACtB,OACC,UAAC,IAAD,YACC,SAAC,IAAD,iBAAYe,QAAZ,IAAYA,OAAZ,EAAYA,EAAQC,QACpB,SAAC,IAAD,2BAAeD,QAAf,IAAeA,OAAf,EAAeA,EAAQE,UAAvB,mBAAoCF,QAApC,IAAoCA,OAApC,EAAoCA,EAAQG,aAC5C,SAAC,IAAD,iBAAYH,QAAZ,IAAYA,OAAZ,EAAYA,EAAQI,SACpB,SAAC,IAAD,wBAAmBC,OAAM,OAACL,QAAD,IAACA,OAAD,EAACA,EAAQM,aAClC,UAAC,IAAD,CAAWhB,GAAI,CAAEC,QAAS,OAAQG,IAAK,GAAvC,UACmB,WAAX,OAANM,QAAM,IAANA,OAAA,EAAAA,EAAQC,QACR,SAAC,IAAD,CACCM,MAAM,OACNC,UAAsB,IAAZzD,EACV0D,WACa,IAAZ1D,GACC,SAAC,IAAD,CAAkB2D,KAAM,GAAIH,MAAM,aAElC,SAAC,IAAD,IAGFI,QAAS,WAERtD,EAAa,OAAC2C,QAAD,IAACA,OAAD,EAACA,EAAQlB,KACtB9B,GAAW,EACX,EAdF,8BAmBD,SAAC,IAAD,CACCuD,MAAM,QACNC,UAAsB,IAAZzD,EACV0D,WACa,IAAZ1D,GACC,SAAC,IAAD,CAAkB2D,KAAM,GAAIH,MAAM,aAElC,SAAC,IAAD,IAGFI,QAAS,WAER9C,EAAU,OAACmC,QAAD,IAACA,OAAD,EAACA,EAAQlB,IACnB,EAbF,yBA1BaG,EA8ChB,gBAOP,C","sources":["pages/Users/Users/index.jsx"],"sourcesContent":["import {\n\tBox,\n\tCircularProgress,\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tTypography,\n} from '@mui/material';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useContext, useEffect, useState } from 'react';\nimport CustomButton from '../../../components/common/CustomButton';\nimport { SnackbarSuccess } from '../../../components/SnackBars';\nimport { user } from '../../../constants/table-headers';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { FetchContext } from '../../../context/FetchContext';\n\nconst Users = () => {\n\tconst fetchContext = useContext(FetchContext);\n\tconst [success, setSuccess] = useState(false);\n\tconst [successMessage, setSuccessMessage] = useState();\n\tconst [loading, setLoading] = useState(false);\n\tconst authContext = useContext(AuthContext);\n\tconst [records, setRecords] = useState([]);\n\n\tconst getUsers = () => {\n\t\tfetchContext.authAxios\n\t\t\t.get(`/users`)\n\t\t\t.then(({ data }) => {\n\t\t\t\tsetRecords(data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t};\n\n\tconst changeToAdmin = async (id) => {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tconst { data } = await fetchContext.authAxios.patch(`/users/admin/${id}`);\n\t\t\tsetSuccessMessage(data.message);\n\t\t\tsetSuccess(true);\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst deleteUser = async (id) => {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tawait fetchContext.authAxios.delete(`/users/${id}`);\n\t\t\tsetSuccessMessage('User Deleted');\n\t\t\tsetSuccess(true);\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tgetUsers();\n\t\tconst usersChannel = authContext.pusher.subscribe('users');\n\n\t\tusersChannel.bind('created', (newUsers) => {\n\t\t\tsetRecords((records) => [...records, newUsers]);\n\t\t\tfetchContext.setRefreshKey((fetchContext.refreshKey = +1));\n\t\t});\n\n\t\tusersChannel.bind('updated', (updatedUser) => {\n\t\t\tsetRecords(\n\t\t\t\trecords.map((user) =>\n\t\t\t\t\tuser._id === updatedUser._id ? { ...records, updatedUser } : user\n\t\t\t\t)\n\t\t\t);\n\t\t\tfetchContext.setRefreshKey((fetchContext.refreshKey = +1));\n\t\t});\n\n\t\tusersChannel.bind('deleted-user', (deletedUser) => {\n\t\t\tsetRecords(\n\t\t\t\trecords.filter((user, index) => user._id !== deletedUser[index]._id)\n\t\t\t);\n\t\t\tfetchContext.setRefreshKey(fetchContext.refreshKey + 1);\n\t\t});\n\n\t\treturn () => {\n\t\t\tusersChannel.unbind_all();\n\t\t\tusersChannel.unsubscribe('users');\n\t\t};\n\t}, [fetchContext.refreshKey]);\n\n\treturn (\n\t\t<>\n\t\t\t{successMessage && (\n\t\t\t\t<SnackbarSuccess\n\t\t\t\t\topen={success}\n\t\t\t\t\tsetOpen={setSuccess}\n\t\t\t\t\tsuccessMessage={successMessage}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\tgap: 2,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Typography variant=\"h6\" component=\"h2\">\n\t\t\t\t\tList of All Users\n\t\t\t\t</Typography>\n\n\t\t\t\t<TableContainer component={Paper}>\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t{user.map((req, index) => (\n\t\t\t\t\t\t\t\t\t<TableCell key={index}>{req.label}</TableCell>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{records?.map((record, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TableRow key={index}>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{record?.role}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{`${record?.firstName} ${record?.lastName}`}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{record?.email}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{` +63${String(record?.contact)}`}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell sx={{ display: 'flex', gap: 2 }}>\n\t\t\t\t\t\t\t\t\t\t\t{record?.role !== 'admin' && (\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"info\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loading === true}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading === true ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress size={20} color=\"primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(record?._id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeToAdmin(record?._id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tChange to Admin\n\t\t\t\t\t\t\t\t\t\t\t\t</CustomButton>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<CustomButton\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loading === true}\n\t\t\t\t\t\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading === true ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress size={20} color=\"primary\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(record?._id);\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteUser(record?._id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t\t</CustomButton>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default Users;\n"],"names":["fetchContext","useContext","FetchContext","useState","success","setSuccess","successMessage","setSuccessMessage","loading","setLoading","authContext","AuthContext","records","setRecords","changeToAdmin","id","authAxios","patch","data","message","console","log","deleteUser","delete","useEffect","get","then","catch","error","usersChannel","pusher","subscribe","bind","newUsers","setRefreshKey","refreshKey","updatedUser","map","user","_id","deletedUser","filter","index","unbind_all","unsubscribe","open","setOpen","sx","display","justifyContent","flexDirection","gap","variant","component","Paper","req","label","record","role","firstName","lastName","email","String","contact","color","disabled","startIcon","size","onClick"],"sourceRoot":""}