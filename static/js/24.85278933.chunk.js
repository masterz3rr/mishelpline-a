"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[24],{7290:function(e,r,n){var s=n(3400),i=n(5289),t=n(9157),a=n(5661),o=n(9823),d=n(9276),u=n(184);r.Z=function(e){var r=e.title,n=e.children,c=e.openPopup,l=e.handleClose,f=e.inputEl;return(0,u.jsxs)(i.Z,{open:c,onClose:function(e,r){"backdropClick"!==r&&"escapeKeyDown"!==r&&l()},fullWidth:!0,ref:f,children:[(0,u.jsx)(a.Z,{children:(0,u.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r,(0,u.jsx)(s.Z,{"aria-label":"close",onClick:l,sx:{color:function(e){return e.palette.grey[500]}},children:(0,u.jsx)(o.Z,{})})]})}),(0,u.jsx)(t.Z,{children:n})]})}},3024:function(e,r,n){n.r(r),n.d(r,{default:function(){return D}});var s=n(1413),i=n(2982),t=n(4165),a=n(5861),o=n(885),d=n(8870),u=n(890),c=n(5228),l=n(3896),f=n(2791),m=n(4839),h=n(7290),x=n(5987),p=n(9321),Z=n(7071),j=n(3786),y=n(3239),v=n(5705),b=n(5322),q=n(4163),w=n(3753),_=n(9112),C=n(184),g=["name"],k=function(e){var r=e.name,n=(0,x.Z)(e,g),i=(0,v.U$)(r),t=(0,o.Z)(i,2),a=t[0],d=t[1],u=d.error&&d.touched?d.error:"";return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.Z,(0,s.Z)((0,s.Z)((0,s.Z)({name:a.name},a),{},{fullWidth:!0,error:!!u},n),{},{children:n.children})),(0,C.jsx)(Z.Z,{error:!0,children:u})]})},R=function(e){var r=e.type,n=e.team,s=e.handleClose,i=(0,f.useContext)(q.U),u=((0,f.useContext)(b.V),(0,f.useState)(!1)),c=(0,o.Z)(u,2),l=c[0],h=c[1],x=(0,f.useState)(),p=(0,o.Z)(x,2),Z=p[0],g=p[1],R=(0,f.useState)(!1),T=(0,o.Z)(R,2),N=T[0],K=T[1],M=(0,f.useState)([]),P=(0,o.Z)(M,2),S=P[0],A=P[1],E=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var r,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.authAxios.get("/users/admins");case 3:r=e.sent,n=r.data,A(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n){var a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(!0),e.next=4,i.authAxios.patch("/teams",r);case 4:a=e.sent,o=a.data,g(o.message),h(!0),n(!0),K(!1),s(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){E()}),[]),(0,C.jsxs)(C.Fragment,{children:[Z&&(0,C.jsx)(_.j,{open:l,setOpen:h,successMessage:Z}),(0,C.jsx)(d.Z,{children:(0,C.jsx)(v.J9,{initialValues:{type:r,members:""},validationSchema:w.WR,onSubmit:function(e,r){var n=r.resetForm;F(e,n)},children:function(e){var r,s;e.values;return(0,C.jsxs)(v.l0,{autoComplete:"off",noValidate:!0,children:[(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(k,{name:"members",fullWidth:!0,children:(r=S,s=null===n||void 0===n?void 0:n.members,r.filter((function(e){return!s.some((function(r){return e._id===r._id}))}))).map((function(e,r){return(0,C.jsxs)(j.Z,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]},r)}))})}),(0,C.jsx)(d.Z,{sx:{marginTop:4},children:(0,C.jsx)(m.Z,{fullWidth:!0,type:"submit",color:"success",disabled:!0===N,startIcon:!0===N?(0,C.jsx)(y.Z,{size:20,color:"primary"}):null,children:"Submit"})})]})}})})]})},T=n(9281),N=n(703),K=n(9836),M=n(6890),P=n(5855),S=n(3994),A=n(3382),E=n(7247),F=n(6819),I=function(e){var r,n=e.type,d=e.records,u=e.setRecords,c=(0,f.useContext)(q.U),l=(0,f.useContext)(b.V),h=(0,f.useState)(!1),x=(0,o.Z)(h,2),p=x[0],Z=x[1],j=(0,f.useState)(!1),v=(0,o.Z)(j,2),w=v[0],g=v[1],k=(0,f.useState)(),R=(0,o.Z)(k,2),I=R[0],O=R[1],D=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),e.next=4,c.authAxios.patch("/teams/".concat(r,"/").concat(n));case 4:s=e.sent,i=s.data,O(null===i||void 0===i?void 0:i.message),g(!0),Z(!1),c.setRefreshKey(c.refreshKey+1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){var e=l.pusher.subscribe("team");return e.bind("created",(function(e){u((function(r){return[].concat((0,i.Z)(r),[e])})),c.setRefreshKey(c.refreshKey=1)})),e.bind("updated",(function(e){u(null===d||void 0===d?void 0:d.map((function(r){return r._id===e._id?(0,s.Z)((0,s.Z)({},d),{},{updatedTeam:e}):r}))),c.setRefreshKey(c.refreshKey=1)})),e.bind("deleted-team",(function(e){u(null===d||void 0===d?void 0:d.filter((function(r,n){return r._id!==e[n]._id}))),c.setRefreshKey(c.refreshKey+1)})),function(){e.unbind_all(),e.unsubscribe("team")}}),[c.refreshKey]),(0,C.jsxs)(C.Fragment,{children:[I&&(0,C.jsx)(_.j,{open:w,setOpen:g,successMessage:I}),(0,C.jsx)(T.Z,{component:N.Z,children:(0,C.jsxs)(K.Z,{children:[(0,C.jsx)(M.Z,{children:(0,C.jsx)(P.Z,{children:F.Bz.map((function(e,r){return(0,C.jsx)(S.Z,{children:e.label},r)}))})}),(0,C.jsx)(A.Z,{children:null===d||void 0===d||null===(r=d.members)||void 0===r?void 0:r.map((function(e,r){return(0,C.jsxs)(P.Z,{children:[(0,C.jsxs)(S.Z,{children:[e.firstName," ",e.lastName]}),(0,C.jsx)(S.Z,{children:(0,C.jsx)(m.Z,{color:"error",disabled:!0===p,startIcon:!0===p?(0,C.jsx)(y.Z,{size:20,color:"primary"}):(0,C.jsx)(E.Z,{}),onClick:function(){D(null===e||void 0===e?void 0:e._id)},children:"Delete"})})]},r)}))})]})})]})},O=function(e){var r=e.children,n=e.value,s=e.index;return(0,C.jsx)("div",{role:"tabpanel",hidden:n!==s,id:"simple-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),children:n===s&&(0,C.jsx)(d.Z,{pt:1,children:r})})},D=function(){var e=(0,f.useState)(0),r=(0,o.Z)(e,2),n=r[0],x=r[1],p=(0,f.useState)("data"),Z=(0,o.Z)(p,2),j=Z[0],y=Z[1],v=(0,f.useContext)(q.U),w=(0,f.useContext)(b.V),_=(0,f.useState)({}),g=(0,o.Z)(_,2),k=g[0],T=g[1],N=(0,f.useState)(!1),K=(0,o.Z)(N,2),M=K[0],P=K[1],S=function(){P(!1)},A=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.authAxios.get("/teams/".concat(r));case 3:n=e.sent,s=n.data,T(s[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){A(j);var e=w.pusher.subscribe("team");return e.bind("created",(function(e){T((function(r){return[].concat((0,i.Z)(r),[e])})),v.setRefreshKey(v.refreshKey=1)})),e.bind("updated",(function(e){T(null===k||void 0===k?void 0:k.map((function(r){return r._id===e._id?(0,s.Z)((0,s.Z)({},k),{},{updatedTeam:e}):r}))),v.setRefreshKey(v.refreshKey=1)})),e.bind("deleted-team",(function(e){T(null===k||void 0===k?void 0:k.filter((function(r,n){return r._id!==e[n]._id}))),v.setRefreshKey(v.refreshKey+1)})),function(){e.unbind_all(),e.unsubscribe("team")}}),[v.refreshKey]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"column",gap:2},children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:(0,C.jsx)(u.Z,{variant:"h6",component:"h2",children:"List of All Team"})}),(0,C.jsx)(d.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,C.jsxs)(c.Z,{value:n,onChange:function(e,r){var n=["data","software","hardware","network","others"];x(r),y(n[r]),A(n[r])},indicatorColor:"primary",textColor:"primary",children:[(0,C.jsx)(l.Z,{label:"Data"}),(0,C.jsx)(l.Z,{label:"Software"}),(0,C.jsx)(l.Z,{label:"Hardware"}),(0,C.jsx)(l.Z,{label:"Network"}),(0,C.jsx)(l.Z,{label:"Others"})]})}),(0,C.jsxs)(d.Z,{children:[(0,C.jsxs)(O,{value:n,index:0,children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(m.Z,{color:"primary",onClick:function(){P(!0)},children:["Add New Members for ",j," Team"]})}),(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(I,{type:j,records:k,setRecords:T})})]}),(0,C.jsxs)(O,{value:n,index:1,children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(m.Z,{color:"primary",onClick:function(){P(!0)},children:["Add New Members for ",j," Team"]})}),(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(I,{type:j,records:k,setRecords:T})})]}),(0,C.jsxs)(O,{value:n,index:2,children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(m.Z,{color:"primary",onClick:function(){P(!0)},children:["Add New Members for ",j," Team"]})}),(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(I,{type:j,records:k,setRecords:T})})]}),(0,C.jsxs)(O,{value:n,index:3,children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(m.Z,{color:"primary",onClick:function(){P(!0)},children:["Add New Members for ",j," Team"]})}),(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(I,{type:j,records:k,setRecords:T})})]}),(0,C.jsxs)(O,{value:n,index:4,children:[(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(m.Z,{color:"primary",onClick:function(){P(!0)},children:["Add New Members for ",j," Team"]})}),(0,C.jsx)(d.Z,{sx:{marginTop:2},children:(0,C.jsx)(I,{type:j,records:k,setRecords:T})})]})]})]}),(0,C.jsx)(h.Z,{title:"Choose a new member",openPopup:M,handleClose:S,children:(0,C.jsx)(R,{type:j,team:k,handleClose:S})})]})}},3753:function(e,r,n){n.d(r,{AX:function(){return a},EF:function(){return c},HP:function(){return d},M4:function(){return o},Ph:function(){return t},WR:function(){return u},ZQ:function(){return l},dm:function(){return i}});var s=n(4929),i=s.Ry().shape({email:s.Z_().email("Invalid email").required("Email is required"),password:s.Z_().required("Password is required")}),t=s.Ry().shape({role:s.Z_().required("Type is required"),firstName:s.Z_().required("First name is required"),lastName:s.Z_().required("Last name is required"),contact:s.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),email:s.Z_().email("Invalid email").required("Email is required"),password:s.Z_().required("Password is required"),confirmPassword:s.Z_().oneOf([s.iH("password"),null],"Passwords must match").required("Confirm your password")}),a=s.Ry().shape({role:s.Z_().required("Type is required"),firstName:s.Z_().required("First name is required"),lastName:s.Z_().required("Last name is required"),email:s.Z_().email("Invalid email").required("Email is required"),contact:s.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),department:s.Z_().required("Department is required").min(5,"Must be at least 5 characters"),office:s.Z_().min(5,"Must be at least 5 characters"),password:s.Z_().required("Password is required"),confirmPassword:s.Z_().oneOf([s.iH("password"),null],"Passwords must match").required("Confirm your password")}),o=s.Ry().shape({role:s.Z_().required("Type is required"),firstName:s.Z_().required("First name is required"),lastName:s.Z_().required("Last name is required"),contact:s.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),email:s.Z_().email("Invalid email").required("Email is required"),office:s.Z_().min(5,"Must be at least 5 characters").required("Office name is required"),password:s.Z_().required("Password is required"),confirmPassword:s.Z_().oneOf([s.iH("password"),null],"Passwords must match").required("Confirm your password")}),d=s.Ry().shape({title:s.Z_().required("Title is required"),reqType:s.Z_().required("Type is required"),description:s.Z_().required("Description is required")}),u=s.Ry().shape({type:s.Z_().required("Title is required"),members:s.Z_().required("A new member is required")}),c=s.Ry().shape({personel:s.Z_().required("Personel is required")}),l=s.Ry().shape({reason:s.Z_().required("Personel is required")})}}]);
//# sourceMappingURL=24.85278933.chunk.js.map