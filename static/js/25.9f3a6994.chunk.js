"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[25],{5178:function(e,r,n){var t=n(1413),i=n(885),s=n(5987),a=n(8550),o=n(7071),l=n(5705),u=n(184),d=["type","autoComplete","label"];r.Z=function(e){var r=e.type,n=e.autoComplete,c=e.label,p=(0,s.Z)(e,d),h=(0,l.U$)(p.name),Z=(0,i.Z)(h,2),m=Z[0],v=Z[1],f=v.error&&v.touched?v.error:"";return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.Z,(0,t.Z)((0,t.Z)({name:m.name},m),{},{label:c,variant:"outlined",error:!!f,autoComplete:n,type:r,onChange:function(e){m.onChange(p.name)(e.target.value)}},p)),(0,u.jsx)(o.Z,{error:!0,children:f})]})}},7290:function(e,r,n){var t=n(3400),i=n(5289),s=n(9157),a=n(5661),o=n(9823),l=n(9276),u=n(184);r.Z=function(e){var r=e.title,n=e.children,d=e.openPopup,c=e.handleClose,p=e.inputEl;return(0,u.jsxs)(i.Z,{open:d,onClose:function(e,r){"backdropClick"!==r&&"escapeKeyDown"!==r&&c()},fullWidth:!0,ref:p,children:[(0,u.jsx)(a.Z,{children:(0,u.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r,(0,u.jsx)(t.Z,{"aria-label":"close",onClick:c,sx:{color:function(e){return e.palette.grey[500]}},children:(0,u.jsx)(o.Z,{})})]})}),(0,u.jsx)(s.Z,{children:n})]})}},305:function(e,r,n){n.r(r),n.d(r,{default:function(){return L}});var t=n(1413),i=n(2982),s=n(885),a=n(8870),o=n(890),l=n(9281),u=n(703),d=n(9836),c=n(6890),p=n(5855),h=n(3994),Z=n(3382),m=n(1918),v=n(3935),f=n(6711),x=n(2791),j=n(4165),q=n(5861),y=n(5987),b=n(9321),g=n(7071),_=n(8096),w=n(4925),C=n(3786),S=n(3239),k=n(5705),A=n(3753),P=n(9112),R=n(4163),N=n(4839),M=n(184),F=["name"],T=function(e){var r=e.name,n=(0,y.Z)(e,F),i=(0,k.U$)(r),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=l.error&&l.touched?l.error:"";return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b.Z,(0,t.Z)((0,t.Z)((0,t.Z)({name:o.name},o),{},{fullWidth:!0,error:!!u},n),{},{children:n.children})),(0,M.jsx)(g.Z,{error:!0,children:u})]})},E=function(e){var r=e.record,n=e.handleClose,t=(0,x.useContext)(R.U),i=(0,x.useState)({}),l=(0,s.Z)(i,2),u=l[0],d=l[1],c=(0,x.useState)(!1),p=(0,s.Z)(c,2),h=p[0],Z=p[1],m=(0,x.useState)(!1),v=(0,s.Z)(m,2),f=v[0],y=v[1],b=(0,x.useState)(!1),g=(0,s.Z)(b,2),F=g[0],E=g[1],I=(0,x.useState)(),z=(0,s.Z)(I,2),D=z[0],K=z[1],O=(0,x.useState)(),L=(0,s.Z)(O,2),W=L[0],U=L[1],V=function(){var e=(0,q.Z)((0,j.Z)().mark((function e(){var n,i;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.authAxios.get("/teams/".concat(null===r||void 0===r?void 0:r.title));case 3:n=e.sent,i=n.data,d(i[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,q.Z)((0,j.Z)().mark((function e(i,s){var a,o,l,u;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),e.next=4,t.authAxios.patch("/request/approve/".concat(null===r||void 0===r?void 0:r._id),i);case 4:a=e.sent,o=a.data,K(o.message),y(!0),U(""),s(!0),Z(!1),n(),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(0),l=null===e.t0||void 0===e.t0?void 0:e.t0.response,u=l.data,U(null===u||void 0===u?void 0:u.message),E(!0),K(""),Z(!1);case 21:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(r,n){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){V()}),[]);var $=new Date(null===r||void 0===r?void 0:r.createdAt),J=$.getMonth()+1,Q=J<10?"0".concat(J):J,B=$.getDate(),X=B<10?"0".concat(B):B;return(0,M.jsxs)(M.Fragment,{children:[K&&(0,M.jsx)(P.j,{open:f,setOpen:y,message:D}),U&&(0,M.jsx)(P.A,{open:F,setOpen:E,message:W}),(0,M.jsxs)(a.Z,{children:[(0,M.jsxs)(a.Z,{children:[(0,M.jsxs)(o.Z,{variant:"h3",component:"span",children:[null===r||void 0===r?void 0:r.ticketNo," "]}),(0,M.jsxs)(o.Z,{variant:"subtitle1",component:"span",children:["file dated"," "]}),(0,M.jsxs)(o.Z,{variant:"h5",component:"span",children:[Q,"/",X]})]}),(0,M.jsxs)(a.Z,{mt:4,children:[(0,M.jsxs)(o.Z,{sx:{textTransform:"capitalize"},variant:"h5",component:"span",children:[null===r||void 0===r?void 0:r.title," Assistance"]}),(0,M.jsxs)(o.Z,{sx:{textTransform:"uppercase"},variant:"h5",component:"span",children:[" ","(",null===r||void 0===r?void 0:r.reqType,")"]})]}),(0,M.jsx)(k.J9,{initialValues:{personel:""},validationSchema:A.EF,onSubmit:function(e,r){var n=r.resetForm;H(e,n)},children:function(e){var r;return(0,M.jsxs)(k.l0,{autoComplete:"off",noValidate:!0,children:[(0,M.jsx)(a.Z,{mt:4,children:(0,M.jsxs)(_.Z,{fullWidth:!0,children:[(0,M.jsx)(w.Z,{id:"Admin-Selection-label",children:"Assign Administrator"}),(0,M.jsx)(T,{label:"Assigned Administrator",name:"personel",fullWidth:!0,children:null===u||void 0===u||null===(r=u.members)||void 0===r?void 0:r.map((function(e,r){return(0,M.jsx)(C.Z,{value:null===e||void 0===e?void 0:e._id,children:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)},r)}))})]})}),(0,M.jsx)(a.Z,{mt:4,children:(0,M.jsx)(N.Z,{type:"submit",color:"success",disabled:!0===h,startIcon:!0===h?(0,M.jsx)(S.Z,{size:20,color:"primary"}):null,children:"Submit"})})]})}})]})]})},I=n(5178),z=function(e){var r=e.record,n=e.handleClose,t=(0,x.useContext)(R.U),i=(0,x.useState)(!1),o=(0,s.Z)(i,2),l=o[0],u=o[1],d=(0,x.useState)(!1),c=(0,s.Z)(d,2),p=c[0],h=c[1],Z=(0,x.useState)(!1),m=(0,s.Z)(Z,2),v=m[0],f=m[1],y=(0,x.useState)(),b=(0,s.Z)(y,2),g=b[0],_=b[1],w=(0,x.useState)(),C=(0,s.Z)(w,2),F=C[0],T=C[1],E=function(){var e=(0,q.Z)((0,j.Z)().mark((function e(i,s){var a,o,l,d;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,t.authAxios.patch("/request/reject/".concat(null===r||void 0===r?void 0:r._id),i);case 4:a=e.sent,o=a.data,_(o.message),h(!0),T(""),s(!0),u(!1),n(),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(0),l=null===e.t0||void 0===e.t0?void 0:e.t0.response,d=l.data,T(null===d||void 0===d?void 0:d.message),f(!0),_(""),u(!1);case 21:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,M.jsxs)(M.Fragment,{children:[_&&(0,M.jsx)(P.j,{open:p,setOpen:h,message:g}),T&&(0,M.jsx)(P.A,{open:v,setOpen:f,message:F}),(0,M.jsx)(a.Z,{children:(0,M.jsx)(k.J9,{initialValues:{reason:""},validationSchema:A.ZQ,onSubmit:function(e,r){var n=r.resetForm;E(e,n)},children:function(e){return(0,M.jsxs)(k.l0,{autoComplete:"off",noValidate:!0,children:[(0,M.jsx)(I.Z,{multiline:!0,fullWidth:!0,rows:5,sx:{marginTop:1.5},name:"reason",onKeyPress:function(e){e.key.replace(/^[a-zA-Z\s]*$/,"")&&e.preventDefault()}}),(0,M.jsx)(a.Z,{mt:4,children:(0,M.jsx)(N.Z,{type:"submit",color:"success",disabled:!0===l,startIcon:!0===l?(0,M.jsx)(S.Z,{size:20,color:"primary"}):null,children:"Submit"})})]})}})})]})},D=n(7290),K=n(6819),O=n(5322),L=function(){var e=(0,x.useContext)(R.U),r=(0,x.useContext)(O.V),n=(0,x.useState)([]),j=(0,s.Z)(n,2),q=j[0],y=j[1],b=(0,x.useState)(!1),g=(0,s.Z)(b,2),_=g[0],w=g[1],C=(0,x.useState)({}),S=(0,s.Z)(C,2),k=S[0],A=S[1],P=(0,x.useState)(!1),F=(0,s.Z)(P,2),T=F[0],I=F[1],L=function(){w(!1),I(!1)};return(0,x.useEffect)((function(){e.authAxios.get("/requests").then((function(e){var r=e.data;y(r.requests)})).catch((function(e){console.log(e)}));var n=r.pusher.subscribe("request");return n.bind("created",(function(r){y((function(e){return[].concat((0,i.Z)(e),[r])})),e.setRefreshKey(e.refreshKey=1)})),n.bind("updated",(function(r){y(q.map((function(e){return e._id===r._id?(0,t.Z)((0,t.Z)({},q),{},{updateReq:r}):e}))),e.setRefreshKey(e.refreshKey=1)})),n.bind("deleted-req",(function(r){y(q.filter((function(e,n){return e._id!==r[n]._id}))),e.setRefreshKey(e.refreshKey+1)})),function(){n.unbind_all(),n.unsubscribe("request")}}),[e.refreshKey]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"column",gap:2},children:[(0,M.jsx)(o.Z,{variant:"h6",component:"h2",children:"List of All Request"}),(0,M.jsx)(l.Z,{component:u.Z,children:(0,M.jsxs)(d.Z,{children:[(0,M.jsx)(c.Z,{children:(0,M.jsx)(p.Z,{children:K.ez.map((function(e,r){return(0,M.jsx)(h.Z,{children:e.label},r)}))})}),(0,M.jsx)(Z.Z,{children:null===q||void 0===q?void 0:q.map((function(e,r){var n,t,i=new Date(null===e||void 0===e?void 0:e.createdAt),s=i.getMonth()+1,o=s<10?"0".concat(s):s,l=i.getDate(),u=l<10?"0".concat(l):l;return(0,M.jsxs)(p.Z,{children:[(0,M.jsx)(h.Z,{children:"".concat(o," - ").concat(u)}),(0,M.jsx)(h.Z,{children:null===e||void 0===e?void 0:e.ticketNo}),(0,M.jsx)(h.Z,{children:"".concat(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.firstName," ").concat(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.lastName)}),(0,M.jsx)(h.Z,{children:null===e||void 0===e?void 0:e.title}),(0,M.jsx)(h.Z,{children:null===e||void 0===e?void 0:e.reqType}),(0,M.jsx)(h.Z,{children:(0,M.jsxs)(a.Z,{sx:{display:"flex",gap:.5},children:[!1===(null===e||void 0===e?void 0:e.approved)&&!1===(null===e||void 0===e?void 0:e.rejected)&&(0,M.jsx)(m.Z,{label:"In Evaluation",color:"warning"}),!0===(null===e||void 0===e?void 0:e.approved)&&(0,M.jsx)(m.Z,{label:"Approved",color:"success"}),!0===(null===e||void 0===e?void 0:e.completed)&&(0,M.jsx)(m.Z,{label:"Completed",color:"success"}),!0===(null===e||void 0===e?void 0:e.pending)&&(0,M.jsx)(m.Z,{label:"Pending",color:"secondary"}),!1===(null===e||void 0===e?void 0:e.approved)&&!0===(null===e||void 0===e?void 0:e.rejected)&&(0,M.jsx)(m.Z,{label:"Rejected",color:"error"})]})}),null!==e&&void 0!==e&&e.approved||null!==e&&void 0!==e&&e.rejected?(0,M.jsx)(h.Z,{}):(0,M.jsxs)(h.Z,{sx:{display:"flex",gap:2},children:[(0,M.jsx)(N.Z,{color:"success",startIcon:(0,M.jsx)(v.Z,{}),onClick:function(){A(e),w(!0)},children:"Approve"}),(0,M.jsx)(N.Z,{color:"error",startIcon:(0,M.jsx)(f.Z,{}),onClick:function(){A(e),I(!0)},children:"Reject"})]})]},r)}))})]})})]}),(0,M.jsx)(D.Z,{title:"By Clicking Submit, You are approving the following request",openPopup:_,handleClose:L,children:(0,M.jsx)(E,{record:k,handleClose:L})}),(0,M.jsx)(D.Z,{title:"Why Reject this Request?",openPopup:T,handleClose:L,children:(0,M.jsx)(z,{record:k,handleClose:L})})]})}},3753:function(e,r,n){n.d(r,{AX:function(){return a},EF:function(){return d},HP:function(){return l},M4:function(){return o},Ph:function(){return s},WR:function(){return u},ZQ:function(){return c},dm:function(){return i}});var t=n(4929),i=t.Ry().shape({email:t.Z_().email("Invalid email").required("Email is required"),password:t.Z_().required("Password is required")}),s=t.Ry().shape({role:t.Z_().required("Type is required"),firstName:t.Z_().required("First name is required"),lastName:t.Z_().required("Last name is required"),contact:t.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),email:t.Z_().email("Invalid email").required("Email is required"),password:t.Z_().required("Password is required"),confirmPassword:t.Z_().oneOf([t.iH("password"),null],"Passwords must match").required("Confirm your password")}),a=t.Ry().shape({role:t.Z_().required("Type is required"),firstName:t.Z_().required("First name is required"),lastName:t.Z_().required("Last name is required"),email:t.Z_().email("Invalid email").required("Email is required"),contact:t.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),department:t.Z_().required("Department is required").min(5,"Must be at least 5 characters"),office:t.Z_().min(5,"Must be at least 5 characters"),password:t.Z_().required("Password is required"),confirmPassword:t.Z_().oneOf([t.iH("password"),null],"Passwords must match").required("Confirm your password")}),o=t.Ry().shape({role:t.Z_().required("Type is required"),firstName:t.Z_().required("First name is required"),lastName:t.Z_().required("Last name is required"),contact:t.Z_().matches(/^(9)/,"Must start with 9").max(10,"Must be 10 digits").required("Contact No. is required"),email:t.Z_().email("Invalid email").required("Email is required"),office:t.Z_().min(5,"Must be at least 5 characters").required("Office name is required"),password:t.Z_().required("Password is required"),confirmPassword:t.Z_().oneOf([t.iH("password"),null],"Passwords must match").required("Confirm your password")}),l=t.Ry().shape({title:t.Z_().required("Title is required"),reqType:t.Z_().required("Type is required"),description:t.Z_().required("Description is required")}),u=t.Ry().shape({type:t.Z_().required("Title is required"),members:t.Z_().required("A new member is required")}),d=t.Ry().shape({personel:t.Z_().required("Personel is required")}),c=t.Ry().shape({reason:t.Z_().required("Personel is required")})},6711:function(e,r,n){var t=n(4836);r.Z=void 0;var i=t(n(5649)),s=n(184),a=(0,i.default)((0,s.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");r.Z=a},3935:function(e,r,n){var t=n(4836);r.Z=void 0;var i=t(n(5649)),s=n(184),a=(0,i.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");r.Z=a}}]);
//# sourceMappingURL=25.9f3a6994.chunk.js.map